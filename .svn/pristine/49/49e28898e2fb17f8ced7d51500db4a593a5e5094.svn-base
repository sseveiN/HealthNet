{% extends 'main_template.html' %}

{% load staticfiles %}

{% block title %} Dashboard {% endblock title %}

{% block css %}
    <link rel="stylesheet" type="text/css" href="{% static "css/fullcalendar.css" %}"/>
{% endblock css %}

{% block content %}
    <h1>Today's Appointments</h1>
    {%  if appointments %}
        {% include "fragments/calendar_day.html" %}
    {% else %}
        <p>You have no additional appointments today.</p>
    {% endif %}

    <h1>Calendar</h1>
    <p>Click on any appointment to edit it.</p>
    <div id="calendar"></div>
{% endblock content %}

{% block scripts %}
    <script src="http://fullcalendar.io/js/fullcalendar-2.6.1/fullcalendar.min.js"></script>

    <script type="text/javascript">
        $(document).ready(function() {
            var events = {{ appointments_json | safe }};

            $('#calendar').fullCalendar({
                header: {
                    left: 'prev,next today',
                    center: 'title',
                    right: ' month,agendaWeek,agendaDay'
                },
                defaultView: 'agendaWeek',
                events: events,
                eventLimit: true
            });
        });
    </script>
{% endblock scripts %}