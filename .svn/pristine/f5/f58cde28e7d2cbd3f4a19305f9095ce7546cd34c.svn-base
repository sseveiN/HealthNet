from django.db import models
from django_enumfield import enum

from healthnet.core.users.user import User, UserType


class Gender(enum.Enum):
    Male = 0
    Female = 1
    Unspecified = 2


class MaritalStatus(enum.Enum):
    Married = 0
    LivingCommonLaw = 1
    Widowed = 2
    Separated = 3
    Divorced = 4
    Single = 5
    Unspecified = 6


class Patient(User):
    User.user_type = enum.EnumField(UserType, default=UserType.Patient)
    calendar = models.OneToOneField('Calendar')
    records = models.ForeignKey('MedicalRecord')
    height = models.IntegerField()  # Height in cm
    weight = models.IntegerField()  # Weight in lbs
    cholesterol = models.IntegerField()  # Cholesterol in mg/dL
    dob = models.DateField()
    address = models.OneToOneField('Address')
    home_phone = models.CharField(max_length=12)
    work_phone = models.CharField(max_length=12)
    age = models.IntegerField()
    sex = enum.EnumField(Gender, default=Gender.Unspecified)
    marital_status = enum.EnumField(MaritalStatus, default=MaritalStatus.Unspecified)
    health_insurance_provider = models.CharField(max_length=15)  # All the provider codes ive seen are 5 + 10 numbers
    health_insurance_number = models.CharField(max_length=10)  # All the insurance numbers ive seen are 5 + 5 characters
    doctors = models.ForeignKey('Doctor')
    primary_care_provider = models.OneToOneField('Doctor', related_name="primary_care_provider")
    prescriptions = models.ForeignKey('Prescription', related_name="patient_prescriptions")
