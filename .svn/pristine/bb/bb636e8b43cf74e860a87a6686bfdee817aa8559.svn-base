{% extends 'main_template.html' %}

{% load staticfiles %}

{% block title %} Dashboard {% endblock title %}

{% block css %}
    <link rel="stylesheet" type="text/css" href="{% static "css/fullcalendar.css" %}"/>
{% endblock css %}

{% block content %}
    <h1>Today's Appointments</h1>
    {%  if appointments %}
        {% include "fragments/calendar_day.html" %}
    {% else %}
        <p>You have no additional appointments today.</p>
    {% endif %}

    <h1>Calendar</h1>
    <div id="calendar"></div>
{% endblock content %}

{% block scripts %}
    <script src="http://cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment.min.js"></script>
    <script src="http://fullcalendar.io/js/fullcalendar-2.6.1/fullcalendar.min.js"></script>

    <script type="text/javascript">
        $(document).ready(function() {
            var events = {{ appointments_json | safe }};

            $('#calendar').fullCalendar({
                customButtons: {
                    createAppointment: {
                        text: 'Create Appointment',
                        click: function() {
                            alert('TODO: this');
                        }
                    }
                },
                header: {
                    left: 'prev,next today',
                    center: '',
                    right: ' month,agendaWeek,agendaDay'
                },
                defaultView: 'agendaDay',
                events: events
            });
        });
    </script>
{% endblock scripts %}