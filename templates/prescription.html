{% extends "main_template.html" %}

{% load staticfiles %}

{% block title %} Prescriptions {% endblock title %}

{% block css %}
    <link rel="stylesheet" type="text/css" href="//cdn.datatables.net/1.10.11/css/jquery.dataTables.min.css"/>
{% endblock css %}


{% block content %}
    <h1>Prescriptions</h1>
    <h4>Patient Name: {{ patient.first_name }} {{ patient.last_name }}</h4>
    <p>{% if request.session.current_user_is_doctor %}<a href="{% url "views.create_prescription" pk %}"><button type="button" class="btn btn-success btn-lg">Create New Prescription</button></a> {% endif %}</p>



    <table id="prescriptions" class="table" width="100%">
        <thead>
            <tr>
                <th>#</th>
                <th>Name</th>
                <th>Expiration Date</th>
                <th>Description</th>
                <th>Remove</th>
            </tr>
        </thead>
        <tbody>

        {% for p in prescriptions %}
            <tr class="prescriptions-{{ p.get_level_str | lower }}">
                <td>{{ p.pk }}</td>
                <td>{{ p.name}}</td>
                <td>{{ p.expiration_date }}</td>
                <td>{{ p.description }}</td>
                <td>

            <a href="{%  url 'views.edit_info' %}"><span class="glyphicon glyphicon-trash"></span></a></li>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% endblock content %}

{% block scripts %}
    <script type="text/javascript">
        $(document).ready(function(){
            $('#prescriptions').DataTable({
                "aoColumns": [{"sWidth": '2em'}, null, null, null, {"bSortable": false, "sWidth": '3em'}],
                "order": [[1, "desc"]],
                "iDisplayLength": 25
            });
        });
    </script>
{% endblock scripts %}